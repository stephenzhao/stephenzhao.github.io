<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keyword"  content="赵飞, 赵飞博客, Damon, Damon Blog, 个人网站, 博客, 个人网站, 互联网, 前端, 设计, 产品">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="baidu-site-verification" content="FAGkDXqvn4" />
    <!--Description-->
    
        <meta name="description" content="Damon 的博客，学习总结 思考感悟 知识管理">
    

    <!--Author-->
    
        <meta name="author" content="damon">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="一篇文章讲清楚Ract的10大基础和概念"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Damon"/>

    <!--Page Cover-->
    
        <meta property="og:image" content="undefined"/>
    

    <!-- Title -->
    
    <title>一篇文章讲清楚Ract的10大基础和概念 - Damon</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/bootstrap/css/syntax.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <link href="http://cdn.staticfile.org/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <!-- <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" /> -->

</head>

<body>

    <!-- Menu -->
    <!-- Navigation -->

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                
                    <img height="30px" alt="Damon" src="/img/logo_yellow.png">
                
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="blog-navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    
                        <li>
                            <a href="/">Home</a>
                        </li>
                    
                        <li>
                            <a href="/archives">Archives</a>
                        </li>
                    
                        <li>
                            <a href="/about">About</a>
                        </li>
                    
                        <li>
                            <a href="/webpack-cn">Webpackdoc</a>
                        </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#blog-navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from
     * $toggle/$collapse will break global delegation.
     *
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->


    <style type="text/css">
    
    </style>
<header class="intro-header" style="background-image: url('https://uploadbeta.com/api/pictures/random/?key=BingEverydayWallpaperPicture'); background-size: cover; position: relative;">
        <div class="header-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                         <!-- Tags and categories -->
                       
                                
                                    


<a class="tag" href="/tags/react/">react</a> <a class="tag" href="/tags/前端开发/">前端开发</a>


                                
                                
                        

                    </div>
                    <h1>一篇文章讲清楚Ract的10大基础和概念</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        2017-08-24
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container post-container">
        <div class="row">

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p><img src="https://cdn-images-1.medium.com/max/800/1*qUlxDdY3T-rDtJ4LhLGkEg.png" alt="logo"></p>
<p>这篇文章不是讲什么是React，也不是<a href="https://medium.freecodecamp.org/yes-react-is-taking-over-front-end-development-the-question-is-why-40837af8ab76" target="_blank" rel="external">为什么学习React</a>。 而是一篇介绍React的一些基本概念和原理，我假定你们都熟悉js也了解基本的DOM API。</p>
<p>文章中的所有代码例子都只是作为参考，它们可能有别的更好的写法，但这里纯粹的为了理解React概念。</p>
<h1 id="基础-1-React皆组件"><a href="#基础-1-React皆组件" class="headerlink" title="基础 #1: React皆组件"></a>基础 #1: React皆组件</h1><p>React按照可复用组件的概念来设计的。定义一个个的小组件，然后组装成大组件。</p>
<p>所有的组件不论大小都是可复用的，即使跨项目也一样。</p>
<p>一个组件，从形式上看就是一个普通的JS方法：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Example 1</span><br><span class="line">// https://jscomplete.com/repl?j=Sy3QAdKHW</span><br><span class="line">function Button (props) &#123;</span><br><span class="line">  // Returns a DOM element here. For example:</span><br><span class="line">  return &lt;button type="submit"&gt;&#123;props.label&#125;&lt;/button&gt;;</span><br><span class="line">&#125;</span><br><span class="line">// To render the Button component to the browser</span><br><span class="line">ReactDOM.render(&lt;Button label="Save" /&gt;, mountNode)</span><br></pre></td></tr></table></figure>
<p>关于 <code>Button</code> 里面的花括号，还有ReactDOM会在后面介绍。这里只是一个热身例子。</p>
<p>ReactDOM.render 的第二个参数是React会覆盖和监控的目标元素。</p>
<p>关于 Example 1 的个要点:</p>
<ul>
<li>问了和HTML标签区别开来，组件的名字首字母大写。小写是为HTML元素预留的，事实上如果你把该组件命名为’button’，ReactDOM将会忽略此方法直接渲染一个正常的空的HTML button。</li>
<li>和HTML元素一样每个组件也会接收一个属性列表，在React里面这个列表叫Props。由于是一个方法组件你可以随便定义属性。</li>
<li>在Button方法组件上，我们写出了一个类HTML的输出。这种输出既不JS也不是HTML或者React.js。但它是这么的受欢迎以至于变成了React的默认写法。她叫做JSX，一个JS的扩展。JSX也是一种折衷的方案。自己动手试试吧，比如试试让她返回一个input元素。</li>
</ul>
<h1 id="基础-2-JSX的-“flux”-是多少"><a href="#基础-2-JSX的-“flux”-是多少" class="headerlink" title="基础 #2: JSX的 “flux” 是多少?"></a>基础 #2: JSX的 “flux” 是多少?</h1><p>上面的例子Example 1可以用纯react.js实现,而不用jsx:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example 2 -  React component without JSX</span></span><br><span class="line"><span class="comment">// https://jscomplete.com/repl?j=HyiEwoYB-</span></span><br><span class="line"><span class="function">function <span class="title">Button</span> <span class="params">(props)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(</span><br><span class="line">    <span class="string">"button"</span>,</span><br><span class="line">    &#123; type: <span class="string">"submit"</span> &#125;,</span><br><span class="line">    props.label</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// To use Button, you would do something like</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  React.createElement(Button, &#123; label: <span class="string">"Save"</span> &#125;),</span><br><span class="line">  mountNode</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>createElement方法是React顶级API的主要方法。也是7大API中所需要学习的一个。这也说明了ReactAPI很小。</p>
<p>就类似DOM有自己的document.createElement 方法来创建特定标签名的元素。React的createElement方法是一个高级方法能做到document.createElement能做的事，他也能创建代表React组件的元素。我们在上面的例子2中做过后者。</p>
<p>不一样的还有，React的createElement方法接受一个可变的多个参数做为第二个参数后面的参数来代表创建的元素的子元素。所以CreatElement实际是创建了一个树</p>
<p>举个例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example 3 -  React’s createElement API</span></span><br><span class="line"><span class="comment">// https://jscomplete.com/repl?j=r1GNoiFBb</span></span><br><span class="line"><span class="keyword">const</span> InputForm = React.createElement(</span><br><span class="line">  <span class="string">"form"</span>,</span><br><span class="line">  &#123; target: <span class="string">"_blank"</span>, action: <span class="string">"https://google.com/search"</span> &#125;,</span><br><span class="line">  React.createElement(<span class="string">"div"</span>, <span class="keyword">null</span>, <span class="string">"Enter input and click Search"</span>),</span><br><span class="line">  React.createElement(<span class="string">"input"</span>, &#123; className: <span class="string">"big-input"</span> &#125;),</span><br><span class="line">  React.createElement(Button, &#123; label: <span class="string">"Search"</span> &#125;)</span><br><span class="line">);</span><br><span class="line"><span class="comment">// InputForm uses the Button component, so we need that too:</span></span><br><span class="line"><span class="function">function <span class="title">Button</span> <span class="params">(props)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> React.createElement(</span><br><span class="line">    <span class="string">"button"</span>,</span><br><span class="line">    &#123; type: <span class="string">"submit"</span> &#125;,</span><br><span class="line">    props.label</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Then we can use InputForm directly with .render</span></span><br><span class="line">ReactDOM.render(InputForm, mountNode);</span><br></pre></td></tr></table></figure>
<p>从上面列子需要知道：</p>
<ol>
<li><p>因为InputForm不是React组件，只是React元素。所以我们直接用ReactDOM.render来调用InputForm，而不是 <inputform>（注意和Example 1的对比）。</inputform></p>
</li>
<li><p>React.createElement 方法在前两个参数后面接收了多个参数. 他从第三个起的参数列表 由一个该组件的子组件构成的列表.</p>
</li>
<li><p>由于 React.createElement 都是 JavaScript所以我们可以嵌套调用.当该元素没有属性或者Props的时候，该方法的第二个参数可以是null或者是一个空的对象.</p>
</li>
<li><p>我们可以将HTML元素和React组件一起混用，你就把HTML想象为React的内置组件就可以了.</p>
</li>
<li><p>React 的API设计会尽可能的河DOM API接近，这也是为什么在 Input 元素中我们要用className而不是class的原因. 私下里,我们都希望React API可以变成DOM API的一部分，那就太好了.</p>
</li>
</ol>
<p>上面的代码当引入了React库后浏览器是可以理解的，浏览器不能直接解析JSX. 然而我们开发者喜欢跟HMTL打交道而不是createElment（想象一下，整个页面用document.createElement来创建的情景，辣眼睛）. 这就是JSX存在的意义，以其用React.createElement来构建页面，我们更愿意使用一种和HTML更相近的语法:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// Example 4 - JSX (compare with Example 3)</span><br><span class="line">// https://jscomplete.com/repl?j=SJWy3otHW</span><br><span class="line">const InputForm =</span><br><span class="line">  &lt;form target="_blank" action="https://google.com/search"&gt;</span><br><span class="line">    &lt;div&gt;Enter input and click Search&lt;/div&gt;</span><br><span class="line">    &lt;input className="big-input" name="q" /&gt;</span><br><span class="line">    &lt;Button label="Search" /&gt;</span><br><span class="line">  &lt;/form&gt;;</span><br><span class="line">// InputForm "still" uses the Button component, so we need that too.</span><br><span class="line">// Either JSX or normal form would do</span><br><span class="line">function Button (props) &#123;</span><br><span class="line">  // Returns a DOM element here. For example:</span><br><span class="line">  return &lt;button type="submit"&gt;&#123;props.label&#125;&lt;/button&gt;;</span><br><span class="line">&#125;</span><br><span class="line">// Then we can use InputForm directly with .render</span><br><span class="line">ReactDOM.render(InputForm, mountNode);</span><br></pre></td></tr></table></figure>
<p>上面例子你需要知道：</p>
<ul>
<li>它们不是HTML，你可以看到我们还在用className而不是class.</li>
<li>我们一直认为这种类HTML的语法是一种JS，所以可以看到我们在最后加了分号。</li>
</ul>
<p>上面的代码（Example 4）就是JSX了。到目前为止，我们呈现给浏览器的是（Example 3）版本编译后的代码。为了达到被浏览器理解的目的，我们需要使用与处理器来讲JSX版本（Example 4）的代码转换成为React.createElement（Example 3）版本。</p>
<p>这就是JSX，它是为了让我们能够用一种更接近HTML语法来写React组件的一种折衷的办法，也是一个不错的方案。</p>
<blockquote>
<p>开头说的“Flux”这个单词，其实只是为了押韵所以用了这个词。Flux同时也是一个Facebook推出的非常受欢迎的应用框架的名字。其中最出名的实现是Redux。Flux非常适用于React的reactive特性.</p>
</blockquote>
<p>另外，JSX也不是非得和React搭配用的，他也可以独立使用.</p>
<h1 id="基础-3-你可以在-JSX任何位置使用JS表达式"><a href="#基础-3-你可以在-JSX任何位置使用JS表达式" class="headerlink" title="基础 #3: 你可以在 JSX任何位置使用JS表达式"></a>基础 #3: 你可以在 JSX任何位置使用JS表达式</h1><p>在JSX里面，你可以使用带有花括号的JS表达式：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Example 5 -  Using JavaScript expressions in JSX</span><br><span class="line">// https://jscomplete.com/repl?j=SkNN3oYSW</span><br><span class="line">const RandomValue = () =&gt; </span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123; Math.floor(Math.random() * 100) &#125;</span><br><span class="line">  &lt;/div&gt;;</span><br><span class="line">// To use it:</span><br><span class="line">ReactDOM.render(&lt;RandomValue /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<p>任何JS表达式都可以放到花括号里面，这有点像<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank" rel="external">JS字符串模版</a>里面的${} 插值语法.</p>
<p>唯一的约束是：只能是JS表达式，比如：if 语句不能使用了，但是你可以用三元表达式来代替.</p>
<p>JS变量是表达式，所以当组件接收到Props列表（除了随机数外，props是可选的）时，我们可以将其使用到花括号里面。我们在(Example 1)里面的Button组件使用过。</p>
<p>JS对象也同样是表达式。有时候我们在花括号里面使用JS对象，从表现上来看是一个双括号，但这实际上就是一个放在花括号里面的对象而已。比如，我们可以在React的特殊样式属性中传入一个CSS样式对象:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Example 6 - An object passed to the special React style prop</span><br><span class="line">// https://jscomplete.com/repl?j=S1Kw2sFHb</span><br><span class="line">const ErrorDisplay = (&#123;message&#125;) =&gt;</span><br><span class="line">  &lt;div style=&#123; &#123; color: 'red', backgroundColor: 'yellow' &#125; &#125;&gt;</span><br><span class="line">    &#123;message&#125;</span><br><span class="line">  &lt;/div&gt;;</span><br><span class="line">// Use it:</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;ErrorDisplay </span><br><span class="line">    message="These aren't the droids you're looking for" </span><br><span class="line">  /&gt;,</span><br><span class="line">  mountNode</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>注意这里我是怎么结构props里面的message参数的，再次证明它是JS。另外注意看一下style属性的特殊性（它不是HTML，它只是接近DOM API）。我们使用一个对象作为style属性。这样的定义样式就像在写js一样，当然我们就是在写JS。</p>
<p>You can even use a React element inside JSX, because that too is an expression. Remember, a React element is a function call:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// Example 7 - Using a React element within &#123;&#125;</span><br><span class="line">// https://jscomplete.com/repl?j=SkTLpjYr-</span><br><span class="line">const MaybeError = (&#123;errorMessage&#125;) =&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;errorMessage &amp;&amp; <span class="tag">&lt;<span class="name">ErrorDisplay</span> <span class="attr">message</span>=<span class="string">&#123;errorMessage&#125;</span> /&gt;</span>&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</span><br><span class="line">  </span><br><span class="line">// The MaybeError component uses the ErrorDisplay component:</span><br><span class="line">const ErrorDisplay = (&#123;message&#125;) =&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;</span> &#123; <span class="attr">color:</span> '<span class="attr">red</span>', <span class="attr">backgroundColor:</span> '<span class="attr">yellow</span>' &#125; &#125;&gt;</span></span><br><span class="line">    &#123;message&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</span><br><span class="line">// Now we can use the MaybeError component:</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="tag">&lt;<span class="name">MaybeError</span></span><br><span class="line">    <span class="attr">errorMessage</span>=<span class="string">&#123;Math.random()</span> &gt;</span> 0.5 ? 'Not good' : ''&#125;</span><br><span class="line">  /&gt;,</span><br><span class="line">  mountNode</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>The MaybeError component above would only display the ErrorDisplay component if there is an errorMessage string passed to it and an empty div. React considers {true}, {false}, {undefined}, and {null} to be valid element children, which do not render anything.</p>
<p>You can also use all of JavaScript functional methods on collections (map, reduce, filter, concat, and so on) inside JSX. Again, because they return expressions:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Example 8 - Using an array map inside &#123;&#125;</span><br><span class="line">// https://jscomplete.com/repl?j=SJ29aiYH-</span><br><span class="line">const Doubler = (&#123;value=[1, 2, 3]&#125;) =&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;value.map(e =&gt; e * 2)&#125;</span><br><span class="line">  &lt;/div&gt;;</span><br><span class="line">// Use it</span><br><span class="line">ReactDOM.render(&lt;Doubler /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<p>Note how I gave the value prop a default value above, because it’s all just Javascript. Note also that I outputted an array expression inside the div. React is okay with that. It will place every doubled value in a text node.</p>
<h1 id="Fundamental-4-You-can-write-React-components-with-JavaScript-classes"><a href="#Fundamental-4-You-can-write-React-components-with-JavaScript-classes" class="headerlink" title="Fundamental #4: You can write React components with JavaScript classes"></a>Fundamental #4: You can write React components with JavaScript classes</h1><p>Simple function components are great for simple needs, but sometimes we need more. React supports creating components through the JavaScript class syntax as well. Here’s the Button component (in Example 1) written with the class syntax:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// Example 9 - Creating components using JavaScript classes</span><br><span class="line">// https://jscomplete.com/repl?j=ryjk0iKHb</span><br><span class="line">class Button extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;button&gt;&#123;this.props.label&#125;&lt;/button&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Use it (same syntax)</span><br><span class="line">ReactDOM.render(&lt;Button label="Save" /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<p>The class syntax is simple. Define a class that extends React.Component (another top-level React API thing that you need to learn). The class defines a single instance function render(), and that render function returns the virtual DOM object. Every time we use the Button class-based component above (for example, by doing <button ...="">), React will instantiate an object from this class-based component and use that object in the DOM tree.</button></p>
<p>This is the reason why we used this.props.label inside the JSX in the rendered output above. Because every component gets a special instance property called props that holds all values passed to that component when it was instantiated.</p>
<p>Since we have an instance associated with a single use of the component, we can customize that instance as we wish. We can, for example, customize it after it gets constructed by using the regular JavaScript constructor function:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Example 10 -  Customizing a component instance</span><br><span class="line">// https://jscomplete.com/repl?j=rko7RsKS-</span><br><span class="line">class Button extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.id = Date.now();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;button id=&#123;this.id&#125;&gt;&#123;this.props.label&#125;&lt;/button&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Use it</span><br><span class="line">ReactDOM.render(&lt;Button label="Save" /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<p>We can also define class prototype functions and use them anywhere we wish, including inside the returned JSX output:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// Example 11 — Using class properties</span><br><span class="line">// https://jscomplete.com/repl?j=H1YDCoFSb</span><br><span class="line">class Button extends React.Component &#123;</span><br><span class="line">  clickCounter = 0;</span><br><span class="line">handleClick = () =&gt; &#123;</span><br><span class="line">    console.log(`Clicked: $&#123;++this.clickCounter&#125;`);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;button id=&#123;this.id&#125; onClick=&#123;this.handleClick&#125;&gt;</span><br><span class="line">        &#123;this.props.label&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Use it</span><br><span class="line">ReactDOM.render(&lt;Button label="Save" /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<p>Note a few things about Example 11 above:</p>
<ul>
<li><p>The handleClick function is written using the new proposed class-field syntax in JavaScript. This is still at stage-2, but for many reasons it’s the best option to access the component mounted instance (thanks to arrow functions). But, you need to use a compiler like Babel configured to understand stage-2 (or the class-field syntax) to get the code above to work. The jsComplete REPL has that pre-configured.</p>
</li>
<li><p>We’ve also defined the clickCounter instance variables using the same class-field syntax. This allows us to skip using a class constructor call altogether.</p>
</li>
<li><p>When we specified the handleClick function as the value of the special onClick React attribute, we did not call it. We passed in the reference to the handleClick function. Calling the function on that level is one of the most common mistakes when working with React.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Wrong:</span><br><span class="line">onClick=&#123;this.handleClick()&#125;</span><br><span class="line">// Right:</span><br><span class="line">onClick=&#123;this.handleClick&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Fundamental-5-Events-in-React-Two-Important-Differences"><a href="#Fundamental-5-Events-in-React-Two-Important-Differences" class="headerlink" title="Fundamental #5: Events in React: Two Important Differences"></a>Fundamental #5: Events in React: Two Important Differences</h1><p>When handling events inside React elements, there are two very important differences from the way we do so with the DOM API:</p>
<ul>
<li><p>All React elements attributes (events included) are named using camelCase, rather than lowercase. It’s onClick, not onclick.</p>
</li>
<li><p>We pass an actual JavaScript function reference as the event handler, rather than a string. It’s onClick={handleClick}, not onClick=”handleClick”.</p>
</li>
</ul>
<p>React wraps the DOM event object with an object of its own to optimize the performance of events handling. But inside an event handler, we can still access all methods available on the DOM event object. React passes that wrapped event object to every handle call. For example, to prevent a form from the default submission action, you can do:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// Example 12 - Working with wrapped events</span><br><span class="line">// https://jscomplete.com/repl?j=HkIhRoKBb</span><br><span class="line">class Form extends React.Component &#123;</span><br><span class="line">  handleSubmit = (event) =&gt; &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">    console.log(&apos;Form submitted&apos;);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Use it</span><br><span class="line">ReactDOM.render(&lt;Form /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<h1 id="Fundamental-6-Every-React-component-has-a-story"><a href="#Fundamental-6-Every-React-component-has-a-story" class="headerlink" title="Fundamental #6: Every React component has a story"></a>Fundamental #6: Every React component has a story</h1><p>The following applies to the class component only (those that extend React.Component). Function components have a slightly different story.</p>
<ol>
<li><p>First, we define a template for React to create elements from the component.</p>
</li>
<li><p>Then, we instruct React to use it somewhere. For example, inside a render call of another component, or with ReactDOM.render.</p>
</li>
<li><p>Then, React instantiates an element and gives it a set of props that we can access with this.props. Those props are exactly what we passed in step 2 above.</p>
</li>
<li><p>Since it’s all JavaScript, the constructor method will be called (if defined). This is the first of what we call: component lifecycle methods.</p>
</li>
<li><p>React then computes the output of the render method (the virtual DOM node).</p>
</li>
<li><p>Since this is the first time React is rendering the element, React will communicate with the browser (on our behalf, using the DOM API) to display the element there. This process is commonly known as mounting.</p>
</li>
<li><p>React then invokes another lifecycle method, called componentDidMount. We can use this method to, for example, do something on the DOM that we now know exists in the browser. Prior to this lifecycle method, the DOM we work with was all virtual.</p>
</li>
<li><p>Some components stories end here. Other components get unmounted from the browser DOM for various reasons. Right before the latter happens, React invokes another lifecycle method, componentWillUnmount.</p>
</li>
<li><p>The state of any mounted element might change. The parent of that element might re-render. In either case, the mounted element might receive a different set of props. React magic happens here and we actually start needing React at this point! Prior to this point, we did not need React at all, honestly.</p>
</li>
<li><p>The story of this component continues, but before it does, we need to understand this state thing that I speak of.</p>
</li>
</ol>
<h1 id="Fundamental-7-React-components-can-have-a-private-state"><a href="#Fundamental-7-React-components-can-have-a-private-state" class="headerlink" title="Fundamental #7: React components can have a private state"></a>Fundamental #7: React components can have a private state</h1><p>The following is also only applicable to class components. Did I mention that some people call presentational-only components dumb?</p>
<p>The state class field is a special one in any React class component. React monitors every component state for changes. But for React to do so efficiently, we have to change the state field through another React API thing that we need to learn, this.setState:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// Example 13 -  the setState API</span><br><span class="line">// https://jscomplete.com/repl?j=H1fek2KH-</span><br><span class="line">class CounterButton extends React.Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    clickCounter: 0,</span><br><span class="line">    currentTimestamp: new Date(),</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  handleClick = () =&gt; &#123;</span><br><span class="line">    this.setState((prevState) =&gt; &#123;</span><br><span class="line">     return &#123; clickCounter: prevState.clickCounter + 1 &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">   setInterval(() =&gt; &#123;</span><br><span class="line">     this.setState(&#123; currentTimestamp: new Date() &#125;)</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;this.handleClick&#125;&gt;Click&lt;/button&gt;</span><br><span class="line">        &lt;p&gt;Clicked: &#123;this.state.clickCounter&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;Time: &#123;this.state.currentTimestamp.toLocaleString()&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Use it</span><br><span class="line">ReactDOM.render(&lt;CounterButton /&gt;, mountNode);</span><br></pre></td></tr></table></figure>
<p>This is the most important example to understand. It will basically complete your fundamental knowledge of the React way. After this example, there are a few other small things that you need to learn, but it’s mostly you and your JavaScript skills from that point.</p>
<p>Let’s walk through Example 13, starting with class fields. It has two of them. The special state field is initialized with an object that holds a clickCounter that starts with 0, and a currentTimestamp that starts with new Date().</p>
<p>The second class field is a handleClick function, which we passed to the onClick event for the button element inside the render method. The handleClick method modifies this component instance state using setState. Take notice of that.</p>
<p>The other place we’re modifying the state is inside an interval timer that we started inside the componentDidMount lifecycle method. It ticks every second and executes another call to this.setState.</p>
<p>In the render method, we used the two properties we have on the state with a normal read syntax. There is no special API for that.</p>
<p>Now, notice that we updated the state using two different ways:</p>
<ol>
<li>By passing a function that returned an object. We did that inside the handleClick function.</li>
<li>By passing a regular object. We did that inside the interval callback.</li>
</ol>
<p>Both ways are acceptable, but the first one is preferred when you read and write to the state at the same time (which we do). Inside the interval callback, we’re only writing to the state and not reading it. When in doubt, always use the first function-as-argument syntax. It’s safer with race conditions because setState is actually an asynchronous method.</p>
<p>How do we update the state? We return an object with the new value of what we want to update. Notice how in both calls to setState, we’re only passing one property from the state field and not both. This is completely okay because setState actually merges what you pass it (the returned value of the function argument) with the existing state. So, not specifying a property while calling setState means that we wish to not change that property (but not delete it).</p>
<h1 id="Fundamental-8-React-will-react"><a href="#Fundamental-8-React-will-react" class="headerlink" title="Fundamental #8: React will react"></a>Fundamental #8: React will react</h1><p>React gets its name from the fact that it reacts to state changes (although not reactively, but on a schedule). There was a joke that React should have been named Schedule!</p>
<p>However, what we witness with the naked eye when the state of any component gets updated is that React reacts to that update and automatically reflects the update in the browser DOM (if needed).</p>
<p>Think of the render function’s input as both</p>
<ul>
<li><p>the props that get passed by the parent</p>
</li>
<li><p>the internal private state that can be updated anytime</p>
</li>
</ul>
<p>When the input of the render function changes, its output might change.</p>
<p>React keeps a record of the history of renders and when it sees that one render is different than the previous one, it’ll compute the difference between them and efficiently translate it into actual DOM operations that get executed in the DOM.</p>
<h1 id="Fundamental-9-React-is-your-agent"><a href="#Fundamental-9-React-is-your-agent" class="headerlink" title="Fundamental #9: React is your agent"></a>Fundamental #9: React is your agent</h1><p>You can think of React as the agent we hired to communicate with the browser. Take the current timestamp display above as an example. Instead of us manually going to the browser and invoking DOM API operations to find and update the p#timestamp element every second, we just changed a property on the state of the component and React did its job of communicating with the browser on our behalf. I believe this is the true reason why React is popular. We hate talking to Mr. browser (and the so many dialects of the DOM language that it speaks) and React volunteered to do all the talking for us, for free!</p>
<h1 id="Fundamental-10-Every-React-component-has-a-story-part-2"><a href="#Fundamental-10-Every-React-component-has-a-story-part-2" class="headerlink" title="Fundamental #10: Every React component has a story (part 2)"></a>Fundamental #10: Every React component has a story (part 2)</h1><p>Now that we know about the state of a component and how when that state changes some magic happens, let’s learn the last few concepts about that process.</p>
<ol>
<li><p>A component might need to re-render when its state gets updated or when its parent decides to change the props that it passed to the component</p>
</li>
<li><p>If the latter happens, React invokes another lifecycle method, componentWillReceiveProps.</p>
</li>
<li><p>If either the state object or the passed-in props are changed, React has an important decision to do. Should the component be updated in the DOM? This is why it invokes another important lifecycle method here, shouldComponentUpdate. This method is an actual question, so if you need to customize or optimize the render process on your own, you have to answer that question by returning either true or false.</p>
</li>
<li><p>If there is no custom shouldComponentUpdate specified, React defaults to a very smart thing that’s actually good enough in most situations.</p>
</li>
<li><p>First, React invokes another lifecycle method at this point, componentWillUpdate. React will then compute the new rendered output and compare it with the last rendered output.</p>
</li>
<li><p>If the rendered output is exactly the same, React does nothing (no need to talk to Mr. Browser).</p>
</li>
<li><p>If there is a difference, React takes that difference to the browser, as we’ve seen before.</p>
</li>
<li><p>In any case, since an update process happened anyway (even if the output was exactly the same), React invokes the final lifecycle method, componentDidUpdate.</p>
</li>
</ol>
<p>Lifecycle methods are actually escape hatches. If you’re not doing anything special, you can create full applications without them. They’re very handy for analyzing what is going on in the application and for further optimizing the performance of React updates.</p>
<p>That’s it. Believe it or not, with what you learned above (or parts of it, really), you can start creating some interesting React applications. If you’re hungry for more, check out my <a href="https://www.pluralsight.com/courses/react-js-getting-started" target="_blank" rel="external">Getting Started with React.js course at Pluralsight:</a></p>
<p>I also strongly recommend the <a href="http://amzn.to/2vVvU8L" target="_blank" rel="external">Learning React book</a> by Alex and Eve!</p>
<blockquote>
<p>This article was originally published on EdgeCoders here. The EdgeCoders version of the article uses interactive code examples which you can edit and re-run from within the article.</p>
</blockquote>
<p>Thanks for reading. If you found this article helpful, please recommend it and share it. Follow me for more articles on React.js and JavaScript.</p>

            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                


            </div>
        </div>
    </div>
</article>

    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="" target="_blank">
                            <span class="fa-stack fa-sm">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-zhihu fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="" target="_blank">
                            <span class="fa-stack fa-sm">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="" target="_blank">
                            <span class="fa-stack fa-sm">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">
                    copyright ©️  2016 Damon Blog<br>
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a target="_blank" href="https://hexo.io/">Hexo</a>  theme by  <a href="/" target="_blank">damon</a>
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=stephenzhao&repo=hexo-theme-damon&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>
<img  src="https://www.gravatar.com/avatar/0674d0a22f7345e0625c9c7b39689c82?s=180" width="0" height="0" style="font-size: 0">


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap -->
<script src="/bootstrap/js/bootstrap.min.js"></script>

<!-- Bootstrap -->
<script src="/js/blog.js"></script>

<!-- Gallery -->
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<script type="text/javascript">
    var $imgs = $('.intro-header[data-imgs]');
    var imgs = $imgs.data('imgs');
    if (imgs.length > 0) {
        $imgs.css('background-image', 'url('+ imgs[Math.floor(Math.random() * 100) % imgs.length] +')')
    }
</script>
<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("http://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>




<!-- Google Analytics -->


<!-- baidu Analytics -->




</body>

</html>